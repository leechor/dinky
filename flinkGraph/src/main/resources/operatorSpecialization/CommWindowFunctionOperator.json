{
    "$schema": "https://json-schema.org/draft/2020-12/schema",
    "$id": "http://example.com/example.json",
    "type": "array",
    "title": "CommWindowFunctionOperator",
	"minItems": 1,
    "items": {
        "type": "object",
        "title": "configuration",
        "required": [
			"partition",
			"order",
			"group",
			"where",
			"window",
			"columns"
        ],
        "properties": {
            "partition": {
                "type": "string",
                "minLength": 1,
                "title": "partition"
            },
            "order": {
                "type": "string",
				"minLength": 1,
                "title": "order"
            },
			"group": {
			  "type": "object",
			  "anyOf": [
				{
				  "title": "none",
				  "type": "null"
				},
				{
				  "title": "GROUP",
				  "type": "object",
				  "properties": {
					"aggregation": {
						"type": "string",
						"minLength": 1,
						"enum":["group"]
					},
					"column": {
						"type": "string",
						"minLength": 1
					}
				  },
				  "additionalProperties":false
				},
				{
				  "title": "WINDOWS_GROUP",
				  "type": "object",
				  "properties": {
					"aggregation": {
						"type": "string",
						"minLength": 1,
						"enum":["windowGroup"]
					},
					"windowsStart": {
						"type": "string",
						"minLength": 1
					},
					"windowEnd": {
						"type": "string",
						"minLength": 1
					}
				  },
				  "additionalProperties":false
				}
			  ]
			},
            "where": {
                "type": "string",
				"minLength": 1
            },
			"window": {
			  "anyOf": [
				{
				  "title": "none",
				  "type": "null"
				},
				{
				  "title": "TUMBLE",
				  "type": "object",
				  "properties": {
					"windowFunction": {
						"type": "string",
						"enum":["TUMBLE"]
					},
					"table": {
						"type": "string",
						"minLength": 1
					},
					"descriptor": {
						"type": "string",
						"minLength": 1
					},
					"size":{
						"type": "object",
						"properties": {
						"timeSpan": {
							"type": "integer",
							"minimum":0,
							"default":10
						},
						"timeUnit": {
							"type": "string",
							"enum":["SECOND","MINUTE","DAY","MONTH","YEAR"]
						}
					  }
					}
				  },
				  "additionalProperties":false
				},
				{
				  "title": "HOP",
				  "type": "object",
				  "properties": {
				  "windowFunction": {
						"type": "string",
						"enum":["HOP"]
					},
					"table": {
						"type": "string",
						"minLength": 1
					},
					"descriptor": {
						"type": "string",
						"minLength": 1
					},
					"slide":{
						"type": "object",
						"properties": {
						"timeSpan": {
							"type": "integer",
							"minimum":0,
							"default":10
						},
						"timeUnit": {
							"type": "string",
							"enum":["SECOND","MINUTE","DAY","MONTH","YEAR"]
						}
					  }
					},
					"size":{
						"type": "object",
						"properties": {
						"timeSpan": {
							"type": "integer",
							"minimum":0,
							"default":10
						},
						"timeUnit": {
							"type": "string",
							"enum":["SECOND","MINUTE","DAY","MONTH","YEAR"]
						}
					  }
					}
				  },
				  "additionalProperties":false
				},
				{
				  "title": "CUMULATE",
				  "type": "object",
				  "properties": {
				  "windowFunction": {
						"type": "string",
						"enum":["CUMULATE"]
					},
					"table": {
						"type": "string",
						"minLength": 1
					},
					"descriptor": {
						"type": "string",
						"minLength": 1
					},
					"step":{
						"type": "object",
						"properties": {
						"timeSpan": {
							"type": "integer",
							"minimum":0,
							"default":10
						},
						"timeUnit": {
							"type": "string",
							"enum":["SECOND","MINUTE","DAY","MONTH","YEAR"]
						}
					  }
					},
					"size":{
						"type": "object",
						"properties": {
						"timeSpan": {
							"type": "integer",
							"minimum":0,
							"default":10
						},
						"timeUnit": {
							"type": "string",
							"enum":["SECOND","MINUTE","DAY","MONTH","YEAR"]
						}
					  }
					}
				  },
				  "additionalProperties":false
				}
			  ]
			},
            "columns": {
				"type": "array",
				"minItems": 1,
				"items": {
					"type": "object",
					"title": "columns",
					"description": "output field",
					"required": [
						"functionName",
						"name",
						"parameters",
						"flag"
					],
					"properties": {
						"functionName": {
							"type": "string",
							"minLength": 1
						},
						"name": {
							"type": "string",
							"minLength": 1
						},
						"parameters": {
							"type": "array",
							"minItems": 1,
							"items": {
							   "type": "string"
							}
						}
					},
					"flag":{
						"type": "boolean",
						"default": true,
						"title": "checked ?"
					}
				}
            }
        }
    }
}